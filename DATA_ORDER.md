# Рабочий Процесс Тестового Заказа для Сбора Данных

Этот документ описывает этапы рабочего процесса тестового заказа, следуя которому мы будем извлекать и фиксировать данные в DATA.md. Цель - собрать структурированные данные, необходимые для валидации и корректировки схемы базы данных в SCHEMA.md. Весь процесс направлен на упорядоченное заполнение таблиц базы данных SQLite, созданных на основе SCHEMA.md, данными, соответствующими тестовому рабочему процессу.

## 1. Поиск и Приоритезация (Анализ предложений и бэклог)

На этом ключевом этапе мы сначала определяем приоритетность товаров в нашем бэклоге, а затем, на основе этого, исследуем рынок для определения наилучших предложений.

*   **Исходные данные:**
    1.  **Формирование бэклога:** Потенциально интересные товары (`keyword`), которые мы рассматриваем для заказа.
    2.  **Поиск предложений:** Информация о текущих ценах, скидках, купонах, кешбэке, стоимости доставки из различных источников (например, веб-сервисы, прайс-листы).

*   **Что фиксируем в DATA.md:**
    *   **Шаг 1: Приоритезация `product`**
        *   Заполняем таблицу `product` основными данными: `id`, `keyword`.
        *   Проставляем `wekan_priority` для каждого товара, отражая его важность.
    *   **Шаг 2: Исследование `offer`**
        *   Для товаров с приоритетом (`wekan_priority > 0`) исследуем и фиксируем данные в таблице `offer`:
            *   `product_id`: Ссылка на товар.
            *   `channel`: Источник предложения (например, AliExpress, Ozon).
            *   `price`: Цена товара.
            *   `status_id`: Статус предложения (например, "доступно", "нет в наличии").
            *   `available`: `TRUE` или `FALSE`.
            *   `acquisition_cost`: Затраты на привлечение (если применимо).
    *   **Шаг 3: Формирование `queue`**
        *   На основе анализа данных из `offer`, принимаем решение о покупке и заносим товар в таблицу `queue`:
            *   `product_id`: Ссылка на товар.
            *   `status_id`: Начальный статус в очереди (например, "Активен в очереди").
            *   `priority_id`: ID приоритета, который может быть скорректирован на основе найденных предложений.
            *   `note`: Любые примечания или контекст.

*   **Результат этапа:** Список `product.id`, добавленных в `queue` с осмысленно выставленным приоритетом и связанными предложениями, готовых для дальнейшей работы.

## 2. Идентификация и Настройка Пользователя

На этом этапе создается или идентифицируется тестовый пользователь, включая его учетные данные и адреса. Эти данные необходимы для дальнейшего формирования корзины и оформления заказа.

*   **Что фиксируем в DATA.md:**
    *   Данные для таблицы `user_account`
    *   Данные для таблицы `address`

## 3. Корзина (Формирование Заказа)

На этом этапе выбранные товары добавляются в корзину.

*   **Что фиксируем в DATA.md:**
    *   Данные для `basket` и `basket_item`.

## 4. Оплата/Кошелек

Фиксация данных для таблиц `payment`, `pay_method` и `wallet`.

*   **Что фиксируем в DATA.md:**
    *   Данные для `payment`, `pay_method`, `wallet`.

## 5. Оформление Заказа и Доставка

Финальный этап, включающий оформление заказа, отгрузку и доставку.

*   **Что фиксируем в DATA.md:**
    *   Данные для `order`, `order_item`, `shipment`.
