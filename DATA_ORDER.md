# Порядок заполнения данных (`DATA_ORDER.md`)

Этот документ определяет последовательность, в которой мы заполняем таблицы в `DATA.md` для симуляции реального рабочего процесса.

## Этап 1: Приоритезация, исследование и каталогизация

**Цель:** Определить, что мы хотим купить, найти это и создать внутреннюю запись о товаре.

**Последовательность:**

1.  **`product`**: 
    *   **Действие:** Находим следующий необработанный товар для добавления в каталог.
    *   **Логика:** 
        1. Идентифицируем все `product.id`, которые **отсутствуют** в таблице `catalog`.
        2. Из этого списка выбираем товар с **наивысшим** значением `wekan_priority`.
    *   **Результат:** Выбран `product` с самым высоким приоритетом для дальнейшей работы.

2.  **`breadcrumb`**:
    *   **Действие:** Определяем иерархию категорий ("хлебные крошки") для выбранного `product`.
    *   **Логика:** Создаем или находим существующую цепочку категорий. Например: `Электроника -> Компоненты -> Коннекторы`.
    *   **Результат:** Заполнена или дополнена таблица `breadcrumb`.

3.  **`catalog`**:
    *   **Действие:** Создаем карточку товара.
    *   **Логика:** Заполняем детали о товаре, связывая его с `product.id` и `breadcrumb.id`.
    *   **Результат:** Новая запись в таблице `catalog`.

4.  **`media`**:
    *   **Действие:** (Опционально) Добавляем медиа-файлы к карточке товара.
    *   **Логика:** Связываем изображения или видео с `catalog.id`.
    *   **Результат:** Новые записи в таблице `media`.

5.  **`offer`**:
    *   **Действие:** Ищем конкретные предложения на рынке.
    *   **Логика:** Находим цены, продавцов и наличие для `product.id`.
    *   **Результат:** Одна или несколько записей в `offer`.

## Этап 2: Формирование корзины и заказа

**Цель:** Выбрать лучшее предложение и подготовиться к покупке.

**Последовательность:**

6.  **`queue`**:
    *   **Действие:** (Если применимо) Добавляем товар в очередь на покупку.
    *   **Логика:** Используется для отслеживания намерений и приоритетов.

7.  **`basket` / `basket_item`**:
    *   **Действие:** Добавляем выбранное `offer` в корзину.

8.  **`order` / `order_item`**:
    *   **Действие:** Формируем заказ из содержимого корзины.
